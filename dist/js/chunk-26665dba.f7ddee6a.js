(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26665dba"],{3140:function(e,t,o){e.exports=o.p+"img/logo_2.862e6a78.svg"},3244:function(e,t,o){"use strict";o("9668")},"6c70":function(e,t,o){e.exports=o.p+"img/login_bg.ebe86a98.jpg"},9668:function(e,t,o){},c7f9:function(e,t,o){e.exports=o.p+"img/logo_1.ebd9d032.svg"},dc3f:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container full-bg",style:{backgroundImage:"linear-gradient(to bottom, rgba(0, 65, 145, 0.65), rgba(0, 30, 98, 0.85)), url("+o("6c70")+")",backgroundSize:"cover",backgroundPosition:"center"}},[e.v>=6?a("div",{staticClass:"header"},[a("img",{attrs:{src:o("3140")}})]):e._e(),e.v<6?a("div",{staticClass:"header"},[a("img",{attrs:{src:o("c7f9")}})]):e._e(),a("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{style:{color:e.color}},[e._v("Documento")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.document,expression:"userData.document"}],staticClass:"form-control",style:{color:e.color},attrs:{type:"text",name:"document"},domProps:{value:e.userData.document},on:{input:function(t){t.target.composing||e.$set(e.userData,"document",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{style:{color:e.color}},[e._v("Contraseña")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],staticClass:"form-control",style:{color:e.color},attrs:{type:"password",name:"password"},domProps:{value:e.userData.password},on:{input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}})]),a("button",{staticClass:"btn gradient",attrs:{type:"submit"}},[e._v("Ingresar")]),a("div",{staticClass:"form-group"},[a("small",{style:{color:e.color}},[e._v("¿Olvidaste tu contraseña?")])]),a("div",{staticClass:"form-group"},[a("small",{style:{color:e.color},on:{click:e.goToRegister}},[e._v("Registrar")])])]),e.showVerificationModal?a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-content"},[a("h2",[e._v("Ingresa el código de verificación")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.verificationCode,expression:"verificationCode"}],staticClass:"form-control",style:{color:"#000"},attrs:{type:"text",placeholder:"Código de verificación"},domProps:{value:e.verificationCode},on:{input:function(t){t.target.composing||(e.verificationCode=t.target.value)}}})]),a("div",{staticClass:"modal-buttons"},[a("button",{staticClass:"btn gradient",on:{click:e.verifyCode}},[e._v("Verificar")]),a("button",{staticClass:"btn gradient",on:{click:e.closeModal}},[e._v("Cancelar")])])])]):e._e()])},r=[],s=o("c7eb"),n=o("1da1"),i=(o("e9c4"),o("b64b"),o("498a"),o("35ca")),c=o("7100"),l={data:function(){return{userData:{document:"",password:""},internetFlag:!0,v:6,isActiveUser:"",color:"#FFF",showVerificationModal:!1,verificationCode:""}},methods:{login:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function t(){var o,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.internetFlag){t.next=3;break}return console.log("No hay conexión a internet"),t.abrupt("return");case 3:return t.prev=3,t.next=6,i["a"].login(e.userData,e.$store);case 6:if(o=t.sent,console.log("response:",o),e.isActiveUser=o.data.isActive,console.log(e.isActiveUser),"0"===String(e.isActiveUser)&&(e.showVerificationModal=!0),!o.error){t.next=14;break}return console.log("Error al hacer login"),t.abrupt("return");case 14:o&&(console.log("Login exitoso:",o.data.token),c["a"].setToken(o.data.token),c["a"].setRefreshToken(o.data.token),localStorage.setItem("userData",JSON.stringify(o.data)),a=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")).id:null,console.log("userId",a)),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),console.log("Error durante el login:",t.t0);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})))()},verifyCode:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function t(){var o,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.verificationCode.trim()){t.next=3;break}return alert("Por favor ingresa el código de verificación."),t.abrupt("return");case 3:if(o=localStorage.getItem("activationCode"),e.verificationCode!==o){t.next=15;break}return a={document:e.userData.document,code:o},t.next=8,i["a"].confirm(a,e.$store);case 8:r=t.sent,console.log("response:",r),alert("Código verificado correctamente ✅"),e.closeModal(),e.$router.push("/loginnuevo"),t.next=16;break;case 15:alert("El código ingresado no es correcto ❌");case 16:e.closeModal();case 17:case"end":return t.stop()}}),t)})))()},closeModal:function(){this.showVerificationModal=!1,this.verificationCode=""},goToRegister:function(){this.$router.push("/register")}},mounted:function(){console.log("LOGIN")}},u=l,d=(o("3244"),o("2877")),g=Object(d["a"])(u,a,r,!1,null,"71467c6e",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-26665dba.f7ddee6a.js.map